{% load  staticfiles %}
<html>
  <head>
    <title>运营分析可视化系统</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="description" content="Blue Moon - Responsive Admin Dashboard" />
    <meta name="keywords" content="Notifications, Admin, Dashboard, Bootstrap3, Sass, transform, CSS3, HTML5, Web design, UI Design, Responsive Dashboard, Responsive Admin, Admin Theme, Best Admin UI, Bootstrap Theme, Wrapbootstrap, Bootstrap, bootstrap.gallery" />
    <meta name="author" content="Bootstrap Gallery" />
    <link rel="shortcut icon" href="{% static 'blue-moon/img/favicon.ico' %}">
    <link href="{% static 'blue-moon/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'blue-moon/css/new.css' %}" rel="stylesheet">
    <link href="{% static 'blue-moon/css/charts-graphs.css' %}" rel="stylesheet">
    <!-- Datepicker CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'blue-moon/css/datepicker.css' %}">

    <link href="{% static 'blue-moon/fonts/font-awesome.min.css' %}" rel="stylesheet">

    <!-- HTML5 shiv and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="{% static 'blue-moon/js/html5shiv.js' %}"></script>
      <script src="{% static 'blue-moon/js/respond.min.js' %}"></script>
    <![endif]-->
  </head>

  <body>

    <!-- Header Start -->
    <header>

      <h2 style="color:orange;width:600px;float:left;font-family: 'Microsoft YaHei';margin: 10px 0 0 0;line-height: 50px"><img src="{% static 'images/MTV.png' %}"/><span style="margin-left:5px;vertical-align: bottom">运营分析可视化系统</span></h2>
      
    </header>
    <!-- Header End -->

    <!-- Main Container start -->
    <div class="dashboard-container">

      <div class="container">
        <!-- Top Nav Start -->
        <div id='cssmenu'>
          <ul>
            <li class='active'>
              <a href='#'>
                <i class="fa fa-dashboard"></i>
                <span >全平台</span>
              </a>
            </li>
            <li>
              <a href="forms.html">
                <i class="fa fa-align-justify"></i>
                频道
              </a>
            </li>
            <li class=''>
              <a href='#'><i class="fa fa-bar-chart-o"></i>节目</a>
              <ul>
                 <li><a href='flot.html'>Flot Graphs</a></li>
                 <li><a href='graphs.html'>Google Graph</a></li>
                 <li><a href='vector-maps.html'>Vector Maps</a></li>
              </ul>
            </li>

          </ul>
        </div>

        <!-- Top Nav End -->



        <!-- Sub Nav End -->

        <!-- Dashboard Wrapper Start -->
        <div class="dashboard-wrapper-lg">
          <div class="widget">
            <div class="wedger-header-blue">

                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div style="font-size: 24px;font-weight: bold;margin:0 -15px;color:#000;" >往日概况 </div>
                </div>

                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <form class="form-inline">
                    <div class="form-group">
                      <label for="exampleInputName2" style="font-size: 14px">开始时间：</label>
                      <input type="date" class="form-control" id="exampleInputName2" placeholder="开始时间">
                    </div>
                    <div class="form-group">
                      <label for="exampleInputEmail2" style="font-size: 14px">结束时间：</label>
                      <input type="date" class="form-control" id="exampleInputEmail2" placeholder="结束时间">
                    </div>
                    <button type="submit" class="btn btn-default">查询</button>
                  </form>
                </div>

            </div>
            <div class="widget-body">
              <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-6" >
                  <div id="header_one" style="height:150px;"></div>
                </div>
                <div class="col-lg-2 col-md-2  col-sm-6">
                  <div class="mini-widget">
                    <div class="mini-widget-heading clearfix">
                      <div class="text-center">VV</div>
                    </div>
                    <div class="mini-widget-body clearfix">
                      <div class="pull-left">
                        <i class="fa fa-play-circle-o"></i>
                      </div>
                      <div class="pull-right number">{{overview_platform_day_dict.vv.0}}万</div>
                    </div>
                    <div class="mini-widget-footer clearfix">
                      <div class="pull-left"><span style="margin-right: 10px">环比</span><i class="fa fa-arrow"></i> <i>{{overview_platform_day_dict.vv.1}}%</i></div>
                      <div class="pull-right"><span style="margin-right: 10px">同比</span><i class="fa fa-arrow"></i></i><i>{{overview_platform_day_dict.vv.2}}%</i></div>
                    </div>
                    <!--                 <div class="mini-widget-footer center-align-text">
                                      <span>Better than last week</span>
                                    </div> -->
                  </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-6">
                  <div class="mini-widget">
                    <div class="mini-widget-heading clearfix">
                      <div class="text-center">UV</div>
                    </div>
                    <div class="mini-widget-body clearfix">
                      <div class="pull-left">
                        <i class="fa fa-users"></i>
                      </div>
                      <div class="pull-right number">{{overview_platform_day_dict.uv.0}}万</div>
                    </div>
                    <div class="mini-widget-footer clearfix">
                      <div class="pull-left"><span style="margin-right: 10px">环比</span><i class="fa fa-arrow"></i> <i>{{overview_platform_day_dict.uv.1}}%</i></div>
                      <div class="pull-right"><span style="margin-right: 10px">同比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.uv.2}}%</i></div>
                    </div>
                    <!--                 <div class="mini-widget-footer center-align-text">
                                      <span>Better than last week</span>
                                    </div> -->
                  </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-6">
                  <div class="mini-widget">
                    <div class="mini-widget-heading clearfix">
                      <div class="pull-center">PV</div>
                    </div>
                    <div class="mini-widget-body clearfix">
                      <div class="pull-left">
                        <i class="fa fa-desktop"></i>
                      </div>
                      <div class="pull-right number">{{overview_platform_day_dict.pv.0}}万</div>
                    </div>
                    <div class="mini-widget-footer clearfix">
                      <div class="pull-left"><span style="margin-right: 10px">环比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.pv.1}}%</i></div>
                      <div class="pull-right"><span style="margin-right: 10px">同比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.pv.2}}%</i></div>
                    </div>
                  </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-6">
                  <div class="mini-widget">
                    <div class="mini-widget-heading clearfix">
                      <div class="text-center">人均播放次数</div>
                    </div>
                    <div class="mini-widget-body clearfix">
                      <div class="pull-left">
                        <i class="fa fa-user-plus"></i>
                      </div>
                      <div class="pull-right number">{{overview_platform_day_dict.vv_perperson.0}}次</div>
                    </div>
                    <div class="mini-widget-footer clearfix">
                      <div class="pull-left"><span style="margin-right: 10px">环比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.vv_perperson.1}}%</i></div>
                      <div class="pull-right"><span style="margin-right: 10px">同比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.vv_perperson.2}}%</i></div>
                    </div>
                    <!--                 <div class="mini-widget-footer center-align-text">
                                      <span>Better than last week</span>
                                    </div> -->
                  </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-6">
                  <div class="mini-widget">
                    <div class="mini-widget-heading clearfix">
                      <div class="text-center">人均播放时长</div>
                    </div>
                    <div class="mini-widget-body clearfix">
                      <div class="pull-left">
                        <i class="fa fa-clock-o"></i>
                      </div>
                      <div class="pull-right number">{{overview_platform_day_dict.duration_perperson.0}}分钟</div>
                    </div>
                    <div class="mini-widget-footer clearfix">
                      <div class="pull-left"><span style="margin-right: 10px">环比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.duration_perperson.1}}%</i></div>
                      <div class="pull-right"><span style="margin-right: 10px">同比</span><i class="fa fa-arrow"></i><i>{{overview_platform_day_dict.duration_perperson.2}}%</i></div>
                    </div>
                    <!--                 <div class="mini-widget-footer center-align-text">
                                      <span>Better than last week</span>
                                    </div> -->
                  </div>
                </div>

              </div>
            </div>

          <!-- Row starts -->

          <!-- Row ends -->

          <!-- Row Start -->
          <div class="widget">
            <div class="wedger-header-blue">
              <div style="font-size: 24px;font-weight: bold;color:#000;">
                平台趋势
              </div>
            </div>
            <div class="widget-body">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div class="widget">
                    <div class="widget-header">
                      <div class="title">
                        月VV趋势
                    <span class="mini-title">
                      Right now
                    </span>
                      </div>
                    </div>
                    <div class="widget-body">
                      <div id="uv_left" style="position: relative;height: 300px;"></div>
                    </div>
                  </div>

                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div class="widget">
                    <div class="widget-header">
                      <div class="title">
                        日VV-UV趋势
                    <span class="mini-title">
                      Right now
                    </span>
                      </div>
                    </div>
                    <div class="widget-body">
                      <div id="uv_right" style="height: 300px"></div>
                    </div>
                  </div>

                </div>

              </div>
            </div>
          </div>



          <!-- Row Start -->
          <div class="widget">
            <div class="wedger-header-blue">
              <div style="font-size: 24px;font-weight: bold;color:#000;">
                平台趋势分析
              </div>
            </div>
            <div class="widget-body">
              <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div class="widget">
                    <div class="widget-header">
                      <div class="title">
                        分端VV趋势
                    <span class="mini-title">
                      Right now
                    </span>
                      </div>
                    </div>
                    <div class="widget-body">
                      <div id="trend_left" style="height: 300px"></div>
                    </div>
                  </div>

                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div class="widget">
                    <div class="widget-header">
                      <div class="title">
                        分端UV趋势
                    <span class="mini-title">
                      Right now
                    </span>
                      </div>
                    </div>
                    <div class="widget-body">
                      <div id="trend_right" style="height: 300px"></div>
                    </div>
                  </div>

                </div>
              </div>

              <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div class="widget">
                    <div class="widget-header">
                      <div class="title">
                        分频道VV趋势
                    <span class="mini-title">
                      Right now
                    </span>
                      </div>
                    </div>
                    <div class="widget-body">
                      <div id="channel_left" style="height: 300px"></div>
                    </div>
                  </div>

                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                  <div class="widget">
                    <div class="widget-header">
                      <div class="title">
                        分频道UV趋势
                    <span class="mini-title">
                      Right now
                    </span>
                      </div>
                    </div>
                    <div class="widget-body">
                      <div id="channel_right" style="height: 300px"></div>
                    </div>
                  </div>

                </div>
              <!-- Row End -->
              <br/>
              <!-- Row Start -->

            </div>

              <div class="row">
                              <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <div class="widget">
                                  <div class="widget-header">
                                    <div class="title">
                                      DAU、UV占比
                                  <span class="mini-title">
                                    Right now
                                  </span>
                                    </div>
                                  </div>
                                  <div class="widget-body">
                                    <div id="display_left" style="height: 600px"></div>
                                  </div>
                                </div>

                              </div>
                              <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                <div class="widget">
                                  <div class="widget-header">
                                    <div class="title">
                                      上周重点节目(日均VV、日均UV、日均VV/UV)
                                  <span class="mini-title">
                                    Right now
                                  </span>
                                    </div>
                                  </div>
                                  <div class="widget-body">
                                    <div id="display_right" style="height: 600px"></div>
                                  </div>
                                </div>

                              </div>
                            </div>
              <!-- Row End -->
              <br/>
          </div>



        </div>
        <!-- Dashboard Wrapper End -->

        <footer>
          <div style="text-align:center"><p>© MGTV hf ltt</p></div>
        </footer>

      </div>
    </div>
    <!-- Main Container end -->

    <script src="{% static 'blue-moon/js/jquery.js' %}"></script>
    <script src="{% static 'blue-moon/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'blue-moon/js/jquery.scrollUp.js' %}"></script>
    
    <!-- jQuery UI JS -->
    <script src="{% static 'blue-moon/js/jquery-ui-v1.10.3.js' %}"></script>

    <!-- Just Gage -->
    <script src="{% static 'blue-moon/js/justgage/raphael.2.1.0.min.js' %}"></script>

    <!-- Flot Charts -->
    <script src="{% static 'blue-moon/js/flot/jquery.flot.js' %}"></script>
    <script src="{% static 'blue-moon/js/flot/jquery.flot.orderBar.min.js' %}"></script>
    <script src="{% static 'blue-moon/js/flot/jquery.flot.stack.min.js' %}"></script>
    <script src="{% static 'blue-moon/js/flot/jquery.flot.pie.min.js' %}"></script>
    <script src="{% static 'blue-moon/js/flot/jquery.flot.tooltip.min.js' %}"></script>
    <script src="{% static 'blue-moon/js/flot/jquery.flot.resize.min.js' %}"></script>

    <!-- Custom JS -->
    <script src="{% static 'blue-moon/js/menu.js' %}"></script>
    <script src="{% static 'blue-moon/js/custom-index2.js' %}"></script>
    <script src="{% static 'blue-moon/js/echarts.min.js' %}"></script>

    <script type="text/javascript">
      var kpi_ratio = {{kpi_ratio}}
      var list=document.querySelectorAll(".fa-arrow");
      for(var i=0;i<list.length;i++){
        var num=parseFloat(list[i].nextElementSibling.innerHTML);
        if(num>0){
          list[i].className="fa fa-arrow-up";
        }else{
          list[i].className="fa fa-arrow-down";
        }
      }
      function firstMap(){

        var myChart = echarts.init(document.getElementById('header_one'));
        option = {

          series : [
            {
              name: '速度',
              type: 'gauge',
              z: 3,
              min: 0,
              max: 120,
              splitNumber: 6,
              radius: '100%',
              axisLine: {            // 坐标轴线
                lineStyle: {       // 属性lineStyle控制线条样式
                  width: 3
                }
              },
              axisTick: {            // 坐标轴小标记
                length: 5,        // 属性length控制线长
                lineStyle: {       // 属性lineStyle控制线条样式
                  color: 'auto'
                }
              },
              splitLine: {           // 分隔线
                length: 10,         // 属性length控制线长
                lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                  color: 'auto'
                }
              },
              title : {
                textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                  fontWeight: 'bolder',
                  fontSize: 10,
                  fontStyle: 'italic'
                }
              },
              detail : {
		formatter:'{value}%',
                textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                  fontWeight: '10'
                }
              },
	                    
	     data:{value: kpi_ratio, name: '季度KPI\nVV达标率'}
            }
          ]
        };

        setInterval(function (){
          myChart.setOption(option,true);
        }.call(this),2000);
        window.onresize = myChart.resize;
      }
      firstMap();

      function uv_left(){
        var vv_month_date = {{ vv_month_date|safe }};
        var vv_month_lastyear = {{ vv_month_lastyear|safe }};
        var vv_month_thisyear = {{ vv_month_thisyear|safe }};
        var myChart = echarts.init(document.getElementById('uv_left'));
		myChart.showLoading();
        // 指定图表的配置项和数据
        var option = {

            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data:['2016','2017']
            },
            calculable : true,
            xAxis : [
                {
                    type : 'category',
                    data : ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月']
                }
            ],
            yAxis: {},
            series: [{
                name: '2016',
                type: 'bar',
                data: vv_month_lastyear,
                markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
                },
                },
                {
                name: '2017',
                type: 'bar',
                data: vv_month_thisyear,
                markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
                },
                }
                ]
        };
		myChart.hideLoading();
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        window.onresize = myChart.resize;
      }
      uv_left();

      function uv_right(){
        var vv_day_date = {{ vv_day_date|safe }};
        var vv_day_data = {{ vv_day_data|safe }};
        var uv_day_data = {{ uv_day_data|safe }};
        var vv_day_perperson = {{ vv_day_perperson|safe }};
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('uv_right'));
		myChart.showLoading();
        // 指定图表的配置项和数据
        var option = {
            tooltip: {},
            legend: {
                data:[{name:'vv',icon:'circle',textStyle:{color:'red'}},{name:'uv',icon:'circle',textStyle:{color:'blue'}}]
            },
            xAxis: {
                data: vv_day_date
            },
            yAxis: {},
            series: [{
                name: 'vv',
                type: 'line',
                data: vv_day_data,
                markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
                },
                markLine : {
                    data : [
                        {type : 'average', name: '平均值'}
                    ]
                }
            },

            {
                name: 'uv',
                type: 'line',
                data: uv_day_data,
                markPoint : {
                data : [
                    {type : 'max', name: '最大值'},
                    {type : 'min', name: '最小值'}
                ]
            },
                markLine : {
                    data : [
                        {type : 'average', name: '平均值'}
                    ]
                },
            }]
        };
		myChart.hideLoading();
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        window.onresize = myChart.resize;
      }
      uv_right();

      function trend_left(){
            var vv_day_date = {{ vv_day_date|safe }};
            var vv_terminal_day_dict = {{ vv_terminal_day_dict|safe }};
            var terminal = new Array();
            for (i in vv_terminal_day_dict){
                terminal.push(i);
            }
            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('trend_left'));
            myChart.showLoading();
            // 指定图表的配置项和数据
            option = {
                title: {
                    text: ''
                },
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:terminal
                },
                toolbox: {
                    feature: {
                        saveAsImage: {}
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis : [
                    {
                        type : 'category',
                        boundaryGap : false,
                        data : vv_day_date
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'phonem',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_terminal_day_dict.phonem
                    },
                    {
                        name:'iphone',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_terminal_day_dict.iphone
                    },
                    {
                        name:'pcweb',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_terminal_day_dict.pcweb
                    },
                    {
                        name:'android',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_terminal_day_dict.android
                    },
                    {
                        name:'ott',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_terminal_day_dict.ott
                    }
                ]
            };
            myChart.hideLoading();
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);
        window.onresize = myChart.resize;
      }
      trend_left();

      function trend_right(){
            var vv_day_date = {{ vv_day_date|safe }};
            var uv_terminal_day_dict = {{ uv_terminal_day_dict|safe }};
            var terminal = new Array();
            for (i in uv_terminal_day_dict){
                terminal.push(i);
            }
            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('trend_right'));
            myChart.showLoading();
            // 指定图表的配置项和数据
            option = {
                title: {
                    text: ''
                },
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:terminal
                },
                toolbox: {
                    feature: {
                        saveAsImage: {}
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis : [
                    {
                        type : 'category',
                        boundaryGap : false,
                        data : vv_day_date
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'phonem',
                        type:'line',
                        data:uv_terminal_day_dict.phonem
                    },
                    {
                        name:'iphone',
                        type:'line',
                        data:uv_terminal_day_dict.iphone
                    },
                    {
                        name:'pcweb',
                        type:'line',
                        data:uv_terminal_day_dict.pcweb
                    },
                    {
                        name:'android',
                        type:'line',
                        data:uv_terminal_day_dict.android
                    },
                    {
                        name:'ott',
                        type:'line',
                        data:uv_terminal_day_dict.ott
                    }
                ]
            };
            myChart.hideLoading();
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);
        window.onresize = myChart.resize;
      }
      trend_right();

      function channel_left(){
            var vv_day_date = {{ vv_day_date|safe }};
            var vv_channel_day_dict = {{ vv_channel_day_dict|safe }};
            var channel = new Array();
            for (i in vv_channel_day_dict){
                channel.push(i);
            }
            // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('channel_left'));
            myChart.showLoading();
            // 指定图表的配置项和数据
            option = {
                title: {
                    text: ''
                },
                tooltip : {
                    trigger: 'axis'
                },
                legend: {
                    data:['综艺','电视剧','电影','动漫']
                },
                toolbox: {
                    feature: {
                        saveAsImage: {}
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis : [
                    {
                        type : 'category',
                        boundaryGap : false,
                        data : vv_day_date
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'电影',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_channel_day_dict.movie
                    },
                    {
                        name:'综艺',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_channel_day_dict.show
                    },
                    {
                        name:'电视剧',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_channel_day_dict.tv
                    },
                    {
                        name:'动漫',
                        type:'line',
                        stack: '总量',
                        areaStyle: {normal: {}},
                        data:vv_channel_day_dict.cartoon
                    }
                ]
            };
            myChart.hideLoading();
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);
      }
      channel_left();

      function channel_right(){
          var vv_day_date = {{ vv_day_date|safe }};
          var uv_channel_day_dict = {{ uv_channel_day_dict|safe }};
          var channel = new Array();
          for (i in uv_channel_day_dict){
              channel.push(i);
          }
          // 基于准备好的dom，初始化echarts实例
          var myChart = echarts.init(document.getElementById('channel_right'));
          myChart.showLoading();
          // 指定图表的配置项和数据
          option = {
              title: {
                  text: ''
              },
              tooltip : {
                  trigger: 'axis'
              },
              legend: {
                  data:['综艺','电视剧','电影','动漫']
              },
              toolbox: {
                  feature: {
                      saveAsImage: {}
                  }
              },
              grid: {
                  left: '3%',
                  right: '4%',
                  bottom: '3%',
                  containLabel: true
              },
              xAxis : [
                  {
                      type : 'category',
                      boundaryGap : false,
                      data : vv_day_date
                  }
              ],
              yAxis : [
                  {
                      type : 'value'
                  }
              ],
              series : [
                  {
                      name:'电影',
                      type:'line',
                      data:uv_channel_day_dict.movie
                  },
                  {
                      name:'综艺',
                      type:'line',
                      data:uv_channel_day_dict.show
                  },
                  {
                      name:'电视剧',
                      type:'line',
                      data:uv_channel_day_dict.tv
                  },
                  {
                      name:'动漫',
                      type:'line',
                      data:uv_channel_day_dict.cartoon
                  }
              ]
          };
          myChart.hideLoading();
          // 使用刚指定的配置项和数据显示图表。
          myChart.setOption(option);
      }
      channel_right();

      function display_left(){
          var vv_day_date = {{ vv_day_date|safe }};
          var dau_day_data = {{ dau_day_data|safe }};
          var uv_ration_day_data = {{ uv_ration_day_data|safe }};

          // 基于准备好的dom，初始化echarts实例
          var myChart = echarts.init(document.getElementById('display_left'));
          myChart.showLoading();
          // 指定图表的配置项和数据
          option = {
                    tooltip: {
                      trigger: 'axis'
                    },
                    legend: {
                      data:['DAU', 'UV占比']
                    },
                    toolbox: {
                      show: true,
                      feature: {
                        dataView: {readOnly: false},
                        restore: {},
                        saveAsImage: {}
                      }
                    },
                    dataZoom: {
                      show: false,
                      start: 0,
                      end: 100
                    },
                    xAxis: [
                      {
                        type: 'category',
                        boundaryGap: true,
                        data:vv_day_date
                      },
                    ],
                    yAxis: [
                      {
                        type: 'value',
                        scale: true,
                        name: 'DAU',
                        max: 4000,
                        min: 0,
                        boundaryGap: [0.2, 0.2]
                      },
                      {
                        type: 'value',
                        scale: true,
                        name: 'UV占比',
                        max: 1,
                        min: 0,
                        boundaryGap: [0.2, 0.2]
                      }
                    ],
                    series: [
                      {
                        name:'DAU',
                        type:'bar',
                        data:dau_day_data

                      },
                      {
                        name:'UV占比',
                        type:'line',
                        yAxisIndex: 1,
                        label: {
                            normal: {
                                show: false,
                                position: 'top'
                            }
                        },
                        data:uv_ration_day_data

                      }
                    ]
                  };
          myChart.hideLoading();
          // 使用刚指定的配置项和数据显示图表。
          myChart.setOption(option);
          window.onresize = myChart.resize;
      }
      display_left();

      function display_right(){
        var pid_day_avg_result_list = {{ pid_day_avg_result|safe }};
        var myChart = echarts.init(document.getElementById('display_right'));

        var data = pid_day_avg_result_list

        option = {
            backgroundColor: new echarts.graphic.RadialGradient(0.3, 0.3, 0.8, [{
                offset: 0,
                color: 'white'
            }, {
                offset: 1,
                color: 'white'
            }]),
            title: {
            text: 'x轴为vv，y轴为uv',
            left: 'center',
            subtext:'气泡大小为人均vv。点越靠右，vv越大，越靠上，uv越大。',
            textStyle: {
              fontWeight: 'bolder',
              textAlign:'right',

            }
          },            
	    legend: {
                right: 10,
                data: ['综艺','电视剧']
            },
            xAxis: {
		name: 'VV',
                splitLine: {
                    lineStyle: {
                        type: 'dashed'
                    }
                }
            },
            yAxis: {
		name: 'UV',
                splitLine: {
                    lineStyle: {
                        type: 'dashed'
                    }
                },
                scale: true
            },
            series: [{
                name: '综艺',
                data: data[0],
                type: 'scatter',
                symbolSize: function (data) {
                    return data[2]*20;
                },
                label: {
                    emphasis: {
                        show: true,
                        formatter: function (param) {
                            var vv = param.data[0];
                            var uv = param.data[1];
                            var name = param.data[3];
                            var all = name+'\n日均vv:'+vv+'万\n日均uv:'+uv+'万';
                            return all;                            
                        },
                        position: 'top'
                    }
                },
                itemStyle: {
                    normal: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(120, 36, 50, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(251, 118, 123)'
                        }, {
                            offset: 1,
                            color: 'rgb(204, 46, 72)'
                        }
                        ])
                    }
                }
            },
{
                name: '电视剧',
                data: data[1],
                type: 'scatter',
                symbolSize: function (data) {
                    return data[2]*20;
                },
                label: {
                    emphasis: {
                        show: true,
                        formatter: function (param) {
                            var vv = param.data[0];
                            var uv = param.data[1];
                            var name = param.data[3];
                            var all = name+'\n日均vv:'+vv+'万\n日均uv:'+uv+'万';
                            return all;                            
                        },
                        position: 'top'
                    }
                },
                itemStyle: {
                    normal: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(25, 100, 150, 0.5)',
                        shadowOffsetY: 5,
                        color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                            offset: 0,
                            color: 'rgb(129, 227, 238)'
                        }, {
                            offset: 1,
                            color: 'rgb(25, 183, 207)'
                        }])
                    }
                }
            }
            ]
        };

        myChart.setOption(option);
        window.onresize = myChart.resize;
      }
      display_right();

      //ScrollUp
      $(function () {
        $.scrollUp({
          scrollName: 'scrollUp', // Element ID
          topDistance: '300', // Distance from top before showing element (px)
          topSpeed: 300, // Speed back to top (ms)
          animation: 'fade', // Fade, slide, none
          animationInSpeed: 400, // Animation in speed (ms)
          animationOutSpeed: 400, // Animation out speed (ms)
          scrollText: 'Top', // Text for element
          activeOverlay: false // Set CSS color to display scrollUp active point, e.g '#00FFFF'
        });
      });




    </script>

  </body>
</html>